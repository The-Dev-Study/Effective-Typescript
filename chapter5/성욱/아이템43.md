# 몽키 패치보다는 안전한 타입을 사용하기

객체에 속성을 추가할 때 이상한 결과를 보일 때가 있다.

```typescript
> RegExp.prototype = 'Capuchin'
"Capuchin"
> /123/.monkey // 추가한 적이 없는데 추가되어있다
"Capuchin"
```

객체에 임의의 속성을 추가하는 것이 일반적으로 좋은 설계는 아니다.
전역 변수를 사용하면 서로 멀리 떨어진 부분들 간에 의존성을 만드는데 이럴 경우 함수를 호출할 때마다 `side effect`를 고려해야만 한다.

```typescript
document.monkey // 'Document' 유형에 'monkey'속성이 없습니다.
(document as any).monkey = 'Tamarin'; // 정상
(document as any).monky = 'Tamarin'; // 정상, 오타
(document as any).monkey = /Tamarin/; // 정상, 잘못된 타입

// 좋은 사용 케이스 (보강, augmentation)
interface Document {
	monkey: string;
}

document.monkey = 'Tamarin'; // 정상
```

보강을 사용했을 때 장점:
- 타입이 더 안전. 오타나 잘못된 타입 할당을 오류로 표시
- 주석을 사용할 수 있음
- 속성에 자동완성을 사용할 수 있음
- 어떤 부분에 적용되었는지 정확한 기록이 남음

```typescript
// global 선언 (모듈 사용에서 제대로 동작시키리면)
export {};
declare global {
	interface Document {
		monkey: string;
	}
}
document.monkey = 'Tamarin';

// 두번째 방법 (타입 단언문)
interface MonkeyDocument extends Document {
	monkey: string;
}
(document as MonkeyDocument).monkey = 'Macaque';
```