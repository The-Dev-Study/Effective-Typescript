# 아이템 21 타입 넓히기

타입스크립트는 지정된 단일 값을 가지고 할당 가능한 값들의 집합을 유추해야한다. 타입스크립트는 이러한 과정을 넓히기(widening)라고 부른다.

const mixed = ['x', 1];

mixed의 타입이 어떻게 추론되는지 살펴보자

다음은 mixed의 타입이 될 수 있는 후보들이다.
- ('x', | 1)[]
- ['x', 1]
- ['string', number]
- readonly [string, number]
- (string|number)[] 
- readonly (string|
number)[]
- [any, any]
- any[]

정보가 충분하지 않다면 mixed가 어떤 타입으로 추론되어야 하는지 알 수 없다. 그러므로 타입스크립트는 작성자의 의도를 추측한다. 그러나 타입스크립트가 아무리 영리하더라도 추측한 답이 항상 옳을 수 없다.

타입스크립트가 let x = 'x';의 타입을 추론하려고 할 때 타입스크립트는 다음과 같은 코드를 예상했기 때문에 x의 타입을 string으로 추론했다.

let x = 'x';
x = 'a';
...

타입스크립트는 x의 타입을 string으로 추론할 때, 명확성과 유연성 사이의 균형을 유지하려고 한다.

## 타입스크립트의 넓히기 과정 제어 방법

### const 사용하기
let대신 const를 사용하면 더 좁은 타입이 된다.

let x = 'x'; -> 타입이 string

const x = 'x';
-> 타입이 'x'

왜냐면 const로 선언된 x는 재할당될 수 없기 때문이다.

하지만 const는 만능이 아니다. 객체와 배열의 경우에는 여전히 문제가 있다. 위의 mixed 예제는 배열에 대한 문제를 보여준다. 튜플 타입을 추론해야 할지, 요소들은 어떤 타입으로 추론해야 할지 알 수 없다. 비슷한 문제가 객체에서도 발생한다.

### 타입 추론의 강도를 제어하기

1. **명시적 타입 구문 제공** <br>
const v: {x: 1|3|5} = {x : 1}; -> 타입이 {x : 1|3|5 }

2. **추가적인 문맥 제공**
3. **const 단언문 사용 (as const)**<br>
값 뒤에 as const를 사용하면 타입스크립트는 최대한 좁은 타입으로 추론한다. 또한, 배열을 튜플 타입으로 추론할 때도 as const를 사용할 수 있다.

## 요약
- 타입스크립트가 넓히기를 통해 상수의 타입을 추론하는 법을 이해해야 한다.
- 동작에 영향을 줄 수 있는 방법인 const, 타입 구문, 문맥, as const에 익숙해져야 한다.
