# Summary 3장 요약과 느낀점

## 추론 가능한 타입을 사용해 장황한 코드 방지하기
타입 추론이 될 경우에는 명시적으로 타입 구문을 적을 필요가 없다.
그러나 타입을 명시할 수 있는 몇가지 상황이 있으니 이를 기억하도록 하자.

- 객체 리터럴을 정의할 때 타입을 명시하면 좋다. 잉여 속성 체크가 동작하기 때문이다.
- 함수의 반환에도 타입을 명시하면 좋다. 
### 느낀 점
나는 Java와 같은 강타입 언어를 주로 사용해와서, 강박적으로 모든 코드에 타입을 명시해왔었다. 그러나 타입스크립트처럼 타입 추론이 되는 언어에서는 굳이 그럴 필요가 없다는 사실을 알게 되었다.

## 다른 타입에는 다른 변수 사용하기
변수의 값은 바뀔 수 있지만, 타입은 보통 바뀌지 않는다는 타입스크립트의 설계원칙을 기억하도록 하자.

### 느낀 점
Java에서도 이래 왔기 때문에 크게 다르다고 생각하는 부분은 없었다.
한 변수를 여러 타입으로도 사용할 수 있는 JavaScript가 오히려 이상한 것이 아닌가란 생각을 했다.
``` java
String name = "원정";
name = 27; // 컴파일 에러 발생
```
## 타입 넓히기
타입 넓히기(widening)는 타입스크립트가 지정된 단일 값을 가지고 할당 가능한 값들의 집합을 유추하는 것을 말한다.
(예, let name = '원정'; -> name의 타입은 무엇일까?)

타입스크립트는 타입을 추론할 때, 명확성과 유연성 사이의 균형을 유지하려고 한다.

타입스크립트의 넓히기 과정을 두 가지 방법을 통해 제어할 수 있다.
1. const를 사용하기 <br>
    const를 통해 선언된 변수는 재할당될 수 없기 때문에 더 좁은 타입으로 유추된다.
    그러나 객체와 배열의 경우 여전히 문제가 있으니 만능이라고 할 수는 없다.
2. 타입 추론의 강도를 제어하기 <br>
 - 명시적으로 타입 구문을 제공
 - 추가적인 문맥을 제공 (함수의 파라미터의 값에 타입을 명시 한다던지...)
 - const 단언문 사용 (as const)

### 느낀 점
타입스크립트는 개발자가 타입을 일일히 지정해주는게 아닌 타입 추론을 하는 언어다보니
타입이 어떻게 지정되는지 과정을 아는게 중요하구나 싶었다.

물론 이런 걸 배우고 익히는데 러닝커브가 있으니 자바처럼 모든 변수에 타입을 지정하는게 차라리 나은 방법이 아닌가 싶기도 하지만, 그러면 코드 복잡해진다고 싫어하니 그렇게 하진 말도록 해야겠다. (추론 가능한 타입을 사용해 장황한 코드 방지하기)

## 타입 좁히기
타입 넓히기의 반대는 타입 좁히기(narrowing)다. 추론 엔진이 값을 통해 타입을 유추해냈으면, 이 타입 집합들의 원소를 줄여나가는게 타입 좁히기이다. (예. object | null 타입을 생각해보자.)

타입을 좁히는 여러 방법이 있다.
1. 분기문에서 예외를 던지거나 함수를 반환하여 타입 좁히기 <br>
    우리가 너무 자주 사용하는 방식이다.
2. 속성 체크로 타입 좁히기 <br>
    객체안의 프로퍼티가 존재하는지 확인하는 방식이다.
3. 내장 함수로 타입 좁히기
4. 태그된 유니온(구별된 유니온) 방식을 사용하기
5. 사용자 정의 타입 가드를 사용하기
### 느낀 점
타입스크립트 추론 엔진이 추론한 결과를 사용자가 원하는 타입에 맞게 좁히는 것도 중요하다. 타입을 좁힐 수 있는 다양한 방법이 있다는 사실을 알 수 있었다.

## 한꺼번에 객체 생성하기
자바스크립트에서는 순차적으로 특정 객체에 프로퍼티를 추가하는 것이 가능하지만, 타입스크립트에서는 되지 않는다.

작은 객체들을 조합해서 큰 객체들을 만들때 여러 단계를 거치는 것은 좋지 않다.
객체 전개 연산자를 활용하면 타입 걱정없이 객체를 생성할 수 있지만, 이 때 모든 업데이트마다 새 변수를 사용하여 각각 새로운 타입을 얻게 하는 것이 중요하다.
### 느낀 점
자바스크립트에서는 되는 것이 참 많다. 그래서 참 불안한 언어인거 같다.

## 일관성 있는 별칭 사용하기
함수 내에서 별칭을 사용하는 것은 좋지만, 일관되지 않게 사용하면 타입을 좁히는 것을 방해한다. 따라서 변수에 별칭을 사용할 때는 일관되게 사용해야 하는데, 이를 위해
비구조화 문법을 고려할 수 있다.
### 느낀 점
자명하다.

## 비동기 코드에는 콜백 대신 async 함수 사용하기
콜백보다는 프로미스 프로미스보다는 async와 await이 좋다.
### 느낀 점
이 또한 자명하다.
async, await은 엄청난 장점을 가져다 주니 꼭 이를 사용하도록 하자.

## 타입 추론에 문맥이 어떻게 사용되는지 이해하기
``` typescript
type Language = 'JavaScript' | 'TypeScript' | 'Python';
function setLanguage(language: Language) {}

setLanguage('JavaScript'); // 정상

let language = 'JavaScript';
setLanguage(language);
// 오류!
```
정상적인 문법 같지만 오류가 난다. 왜냐면 language의 타입은 string으로 추론되었기 때문이다. 이런 문제를 해결하기 위해 몇가지 방법을 시도해 볼 수 있다.
1. 타입 선언에서 language의 가능한 값을 제한하기
2. language를 상수로 만들기

튜플과 객체에서도 문제가 발생하니 타입 문맥이나, 타입 단언을 통해 문제를 적절히 해결하도록 하자.

### 느낀 점
타입 추론이라는 기능을 제대로 활용하려면 알아야 할 것이 참 많은 것 같다.
이번엔 문맥이라는 것이 등장한다. 적절한 문맥을 제공해 주어야 정상적으로 타입추론이 되니
명시적인 타입 구문이 됐건 const를 통한 상수 문맥을 제공하건 적절한 문맥을 추론 엔진에게 제공해 주도록 하자

## 함수형 기법과 라이브러리로 타입 흐름 유지하기
타입 가독성과 명시적인 타입 구문의 필요성을 줄이려면 직접 구현하는 것 보다 내장 함수나 로대시를 사용하는 것이 좋다.

### 느낀 점
이펙티브 타입스크립트에선 내부 함수만 소개했음 좋겠다.

## 총평
3장 타입 추론은 타입스크립트의 타입 추론 시스템을 소개하는 장이었다. 타입 추론은 타입스크립트의 중요한 개념 중 하나로 타입스크립트를 잘 사용하기 위해 꼭 학습해야 하는 부분이라고 할 수 있다. 3장의 내용중 타입 넓히기, 타입 좁히기, 타입 추론에 문맥이 어떻게 사용되는지 이해하기는 특히 중요한 내용이라고 꼽을 수 있을 것 같다.