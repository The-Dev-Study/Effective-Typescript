# 의존성 분리를 위해 미러 타입 사용하기

```typescript
function parseCSV(contents: string | Buffer): {[column: string]: string}[] {
	if (typeof contents === 'object') {
		// 버퍼인 경우
		return parseCSV(contents.toString('utf8'));
	}
	// ...
}

```

CSV 파일을 파싱하는 라이브러리에 Buffer타입을 @types/node를 이용해 설치했다면
devDependencies에 @types/node가 포함될 것이다

다음 두 그룹 사용자들에게는 문제가 된다
1. @types와 무관한 자바스크립트 개발자
2. NodeJS와 무관한 타입스크립트 웹 개발자

각자 필요한 모듈만 사용할 수 있도록 구조적 타이핑을 적용할 수 있다.

```typescript
interface CsvBuffer {
	toString(encoding: string): string;
}

function parseCSV(contents: string | CsvBuffer): {[column: string]: string}[] {
	// ...
}
```

만약 작성 중인 라이브러리가 의존하는 라이브러리의 구현과 무관하게 타입에만 의존한다면
필요한 선언부만 추출하여 작성 중인 라이브러리에 넣는 것(미러링)을 고려해 보는 것도 좋다.