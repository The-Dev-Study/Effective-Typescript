# 사용할 때는 너그럽게, 생성할 때는 엄격하게

함수의 시그니처에서 함수의 매개변수는 범위가 넓어도 되지만, 결과를 반환할 때는 구체적이어야 한다.
optional 필드 주의: 그대로 사용할 경우 undefined 타입으로 추론될 수 있어 구조분해 시 타입 에러가 난다.

```
declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): CameraOptions;

interface CameraOptions {
	center?: LngLat;
	zoom?: number;
	bearing?: number;
	pitch?: number;
}

type LngLat =
	{ lng: number; lat: number; } |
	{ lon: number; lat: number; } |
	[number, number]; 

// 가능한 형태 19가지 이상
type LngLatBounds = 
	{ northeast: LngLat, southwest: LngLat } |
	[LngLat, LngLat] |
	[number, number, number, number];

function focusOnFeature(f: Feature) {
	const bounds = calculateBoundingBox(f);
	const camera = viewportForBounds(bounds);
	setCamera(camera);
	const {center: {lat, lng}, zoom} = camera; // 에러 ('lat' 속성 없음, 'lng' 속성 없음)
	zoom; // number | undefined
	window.location.search `?v=@${lat},${lng}${zoom}`;
}
```

개선된 버전:

```
interface LngLat { lng: number; lat: number; };
type LngLatLike = LngLat | { lon: number; lat: number; } | [number, number];

interface Camera {
	center: LngLat;
	zoom: number;
	bearing: number;
	pitch: number;
}
interface CameraOptions extends Omit<Partial<Camera>, 'center'> {
	center?: LngLatLike;
}
type LngLatBounds =
	{ northeast: LngLatLike, southwest: LngLatLike } |
	[LngLatLike, LngLatLike] |
	[number, number, number, number];

declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): Camera; // optional 필드 사라짐
```
